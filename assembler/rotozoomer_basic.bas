10 REM === ROTOZOOMER WITH SID MUSIC ===
20 REM Enable VideoChip 640x480
30 POKE &HF0000, 1: POKE &HF0004, 0
40 REM === LOAD SID FILE INTO MEMORY ===
50 SA=&H710000
60 BLOAD "Yummy_Pizza.sid", SA
70 SID PLAY SA, 3725
75 PRINT "SID STATUS=";SID STATUS
76 POKE8 &HF0E18, 15
80 REM === GENERATE TEXTURE (256x256 checkerboard at 0x500000) ===
90 TB=&H500000: ST=1024
100 W=&HFFFFFFFF: B=&HFF000000
110 BLIT FILL TB, 128, 128, W, ST
120 BLIT FILL TB+512, 128, 128, B, ST
130 BLIT FILL TB+131072, 128, 128, B, ST
140 BLIT FILL TB+131584, 128, 128, W, ST
150 BB=&H600000
200 REM === MAIN LOOP ===
210 A=0: SI=0
300 REM === FRAME ===
310 SC=0.5+SIN(SI)*0.3: IF SC<0.2 THEN SC=0.2
320 CA=COS(A)/SC: SA=SIN(A)/SC
330 REM Block steps
340 BX=CA*8: BY=SA*8
350 EX=-SA*8: EY=CA*8
360 REM Starting U,V for top-left block centre
370 SU=128-40*BX-30*EX: SV=128-40*BY-30*EY
380 RU=SU: RV=SV
400 REM === RENDER 80x60 BLOCKS (8x8 pixels) TO BACK BUFFER ===
410 FOR Y=0 TO 59
420 U=RU: V=RV: P=BB+Y*20480
430 FOR X=0 TO 79
440 TU=INT(U) AND 255: TV=INT(V) AND 255
450 C=PEEK(TB+TV*1024+TU*4)
460 BLIT FILL P, 8, 8, C, 2560
470 P=P+32: U=U+BX: V=V+BY
480 NEXT X
490 RU=RU+EX: RV=RV+EY
500 NEXT Y
600 REM === FLIP AND ANIMATE ===
610 BLIT MEMCOPY &H600000, &H100000, 307200
615 VSYNC
620 A=A+0.3: IF A>6.28318 THEN A=A-6.28318
630 SI=SI+0.1
640 GOTO 300
