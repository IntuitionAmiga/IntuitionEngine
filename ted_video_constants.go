// ted_video_constants.go - MOS 7360/8360 TED video chip register addresses and constants

/*
 ██▓ ███▄    █ ▄▄▄█████▓ █    ██  ██▓▄▄▄█████▓ ██▓ ▒█████   ███▄    █    ▓█████  ███▄    █   ▄████  ██▓ ███▄    █ ▓█████
▓██▒ ██ ▀█   █ ▓  ██▒ ▓▒ ██  ▓██▒▓██▒▓  ██▒ ▓▒▓██▒▒██▒  ██▒ ██ ▀█   █    ▓█   ▀  ██ ▀█   █  ██▒ ▀█▒▓██▒ ██ ▀█   █ ▓█   ▀
▒██▒▓██  ▀█ ██▒▒ ▓██░ ▒░▓██  ▒██░▒██▒▒ ▓██░ ▒░▒██▒▒██░  ██▒▓██  ▀█ ██▒   ▒███   ▓██  ▀█ ██▒▒██░▄▄▄░▒██▒▓██  ▀█ ██▒▒███
░██░▓██▒  ▐▌██▒░ ▓██▓ ░ ▓▓█  ░██░░██░░ ▓██▓ ░ ░██░▒██   ██░▓██▒  ▐▌██▒   ▒▓█  ▄ ▓██▒  ▐▌██▒░▓█  ██▓░██░▓██▒  ▐▌██▒▒▓█  ▄
░██░▒██░   ▓██░  ▒██▒ ░ ▒▒█████▓ ░██░  ▒██▒ ░ ░██░░ ████▓▒░▒██░   ▓██░   ░▒████▒▒██░   ▓██░░▒▓███▀▒░██░▒██░   ▓██░░▒████▒
░▓  ░ ▒░   ▒ ▒   ▒ ░░   ░▒▓▒ ▒ ▒ ░▓    ▒ ░░   ░▓  ░ ▒░▒░▒░ ░ ▒░   ▒ ▒    ░░ ▒░ ░░ ▒░   ▒ ▒  ░▒   ▒ ░▓  ░ ▒░   ▒ ▒ ░░ ▒░ ░
 ▒ ░░ ░░   ░ ▒░    ░    ░░▒░ ░ ░  ▒ ░    ░     ▒ ░  ░ ▒ ▒░ ░ ░░   ░ ▒░    ░ ░  ░░ ░░   ░ ▒░  ░   ░  ▒ ░░ ░░   ░ ▒░ ░ ░  ░
 ▒ ░   ░   ░ ░   ░       ░░░ ░ ░  ▒ ░  ░       ▒ ░░ ░ ░ ▒     ░   ░ ░       ░      ░   ░ ░ ░ ░   ░  ▒ ░   ░   ░ ░    ░
 ░           ░             ░      ░            ░      ░ ░           ░       ░  ░         ░       ░  ░           ░    ░  ░

(c) 2024 - 2026 Zayn Otley
https://github.com/IntuitionAmiga/IntuitionEngine
License: GPLv3 or later
*/

/*
ted_video_constants.go - MOS 7360/8360 TED Video Chip Constants

The TED (Text Display) chip from the Commodore Plus/4 provides both audio
and video capabilities. This file defines the video-related constants.

TED Video Features:
- 40x25 text mode (8x8 character cells)
- 320x200 pixel resolution
- 121 colors (16 hues × 8 luminances, with black as a special case)
- Hardware cursor support
- Multicolor text mode
- Bitmap graphics mode

Memory Layout (Plus/4):
- Screen matrix (video memory): configurable base address
- Character ROM/RAM: configurable base address
- Color memory: integrated (each character has foreground color)

Register Map:
- TED video registers extend the TED audio range at 0xF0F20-0xF0F3F
- TED audio: 0xF0F00-0xF0F05 (see ted_constants.go)
- TED player: 0xF0F10-0xF0F1F (see ted_constants.go)
- TED video: 0xF0F20-0xF0F3F (this file)

Color System:
- 16 hues: black, white, red, cyan, purple, green, blue, yellow,
           orange, brown, yellow-green, pink, blue-green, light blue,
           dark blue, light green
- 8 luminance levels (0-7)
- Black (hue 0) only exists at luminance 0
- Total: 1 + (15 × 8) = 121 unique colors
*/

package main

// =============================================================================
// TED Video Register Addresses (IE32/M68K direct access)
// =============================================================================

const (
	// TED video register base address (extends TED audio at 0xF0F00)
	TED_VIDEO_BASE = 0xF0F20

	// TED_V_CTRL1 - Control register 1
	// Bit 7: unused
	// Bit 6: ECM (Extended Color Mode)
	// Bit 5: BMM (Bitmap Mode)
	// Bit 4: DEN (Display Enable)
	// Bit 3: RSEL (Row Select - 24/25 rows)
	// Bits 0-2: YSCROLL (Vertical scroll 0-7)
	TED_V_CTRL1 = 0xF0F20

	// TED_V_CTRL2 - Control register 2
	// Bit 7: unused
	// Bit 6: unused
	// Bit 5: RES (Reset bit)
	// Bit 4: MCM (Multicolor Mode)
	// Bit 3: CSEL (Column Select - 38/40 columns)
	// Bits 0-2: XSCROLL (Horizontal scroll 0-7)
	TED_V_CTRL2 = 0xF0F24

	// TED_V_CHAR_BASE - Character/bitmap base address
	// Bits 4-7: Character generator base (in 1KB steps)
	// Bits 0-3: Bitmap base (in 1KB steps for bitmap mode)
	TED_V_CHAR_BASE = 0xF0F28

	// TED_V_VIDEO_BASE - Video matrix base address
	// Bits 3-7: Video matrix base (in 1KB steps)
	TED_V_VIDEO_BASE = 0xF0F2C

	// TED_V_BG_COLOR0 - Background color 0
	// Bits 4-7: Luminance (0-7 in high nibble)
	// Bits 0-3: Hue (0-15)
	TED_V_BG_COLOR0 = 0xF0F30

	// TED_V_BG_COLOR1 - Background color 1 (multicolor mode)
	TED_V_BG_COLOR1 = 0xF0F34

	// TED_V_BG_COLOR2 - Background color 2 (multicolor mode)
	TED_V_BG_COLOR2 = 0xF0F38

	// TED_V_BG_COLOR3 - Background color 3 (multicolor mode)
	TED_V_BG_COLOR3 = 0xF0F3C

	// TED_V_BORDER - Border color
	TED_V_BORDER = 0xF0F40

	// TED_V_CURSOR_HI - Cursor position high byte
	TED_V_CURSOR_HI = 0xF0F44

	// TED_V_CURSOR_LO - Cursor position low byte
	TED_V_CURSOR_LO = 0xF0F48

	// TED_V_CURSOR_CLR - Cursor color
	TED_V_CURSOR_CLR = 0xF0F4C

	// TED_V_RASTER_LO - Raster line low byte (read-only)
	TED_V_RASTER_LO = 0xF0F50

	// TED_V_RASTER_HI - Raster high + flags (read-only)
	// Bit 0: Raster line bit 8
	// Other bits: unused
	TED_V_RASTER_HI = 0xF0F54

	// TED_V_ENABLE - Enable register
	// Bit 0: Video enable (1=active, 0=disabled)
	TED_V_ENABLE = 0xF0F58

	// TED_V_STATUS - Status register (read-only)
	// Bit 0: VBlank active
	TED_V_STATUS = 0xF0F5C

	// TED video register region end
	TED_VIDEO_END = 0xF0F5F
)

// =============================================================================
// TED Video Register Offsets (for array indexing)
// =============================================================================

const (
	TED_V_REG_CTRL1      = 0  // Control register 1
	TED_V_REG_CTRL2      = 1  // Control register 2
	TED_V_REG_CHAR_BASE  = 2  // Character/bitmap base
	TED_V_REG_VIDEO_BASE = 3  // Video matrix base
	TED_V_REG_BG_COLOR0  = 4  // Background color 0
	TED_V_REG_BG_COLOR1  = 5  // Background color 1
	TED_V_REG_BG_COLOR2  = 6  // Background color 2
	TED_V_REG_BG_COLOR3  = 7  // Background color 3
	TED_V_REG_BORDER     = 8  // Border color
	TED_V_REG_CURSOR_HI  = 9  // Cursor position high
	TED_V_REG_CURSOR_LO  = 10 // Cursor position low
	TED_V_REG_CURSOR_CLR = 11 // Cursor color
	TED_V_REG_RASTER_LO  = 12 // Raster line low (read-only)
	TED_V_REG_RASTER_HI  = 13 // Raster high (read-only)
	TED_V_REG_ENABLE     = 14 // Enable register
	TED_V_REG_STATUS     = 15 // Status register (read-only)
	TED_V_REG_COUNT      = 16 // Total register count
)

// =============================================================================
// TED Video Control Register Bits
// =============================================================================

// CTRL1 bits
const (
	TED_V_CTRL1_ECM     = 0x40 // Bit 6: Extended Color Mode
	TED_V_CTRL1_BMM     = 0x20 // Bit 5: Bitmap Mode
	TED_V_CTRL1_DEN     = 0x10 // Bit 4: Display Enable
	TED_V_CTRL1_RSEL    = 0x08 // Bit 3: Row Select (0=24 rows, 1=25 rows)
	TED_V_CTRL1_YSCROLL = 0x07 // Bits 0-2: Vertical scroll
)

// CTRL2 bits
const (
	TED_V_CTRL2_RES     = 0x20 // Bit 5: Reset
	TED_V_CTRL2_MCM     = 0x10 // Bit 4: Multicolor Mode
	TED_V_CTRL2_CSEL    = 0x08 // Bit 3: Column Select (0=38 cols, 1=40 cols)
	TED_V_CTRL2_XSCROLL = 0x07 // Bits 0-2: Horizontal scroll
)

// Enable register bits
const (
	TED_V_ENABLE_VIDEO = 0x01 // Bit 0: Video enable
)

// Status register bits
const (
	TED_V_STATUS_VBLANK = 0x01 // Bit 0: VBlank active
)

// =============================================================================
// TED Video Display Dimensions
// =============================================================================

const (
	// Main display area
	TED_V_DISPLAY_WIDTH  = 320
	TED_V_DISPLAY_HEIGHT = 200

	// Character cell dimensions
	TED_V_CELL_WIDTH  = 8
	TED_V_CELL_HEIGHT = 8
	TED_V_CELLS_X     = 40 // 320 / 8
	TED_V_CELLS_Y     = 25 // 200 / 8

	// Border size (Plus/4 has asymmetric borders)
	TED_V_BORDER_LEFT   = 32
	TED_V_BORDER_RIGHT  = 32
	TED_V_BORDER_TOP    = 35
	TED_V_BORDER_BOTTOM = 37

	// Total frame dimensions (display + border)
	TED_V_FRAME_WIDTH  = TED_V_DISPLAY_WIDTH + TED_V_BORDER_LEFT + TED_V_BORDER_RIGHT  // 384
	TED_V_FRAME_HEIGHT = TED_V_DISPLAY_HEIGHT + TED_V_BORDER_TOP + TED_V_BORDER_BOTTOM // 272

	// Multicolor mode dimensions
	TED_V_MCM_WIDTH = 160 // 320 / 2 (double-width pixels)
)

// =============================================================================
// TED Video Memory Layout
// =============================================================================

const (
	// Default VRAM base address for video matrix
	TED_V_VRAM_BASE = 0xF3000

	// Video matrix size (40x25 = 1000 bytes, rounded to 1KB)
	TED_V_MATRIX_SIZE = 1024

	// Color RAM size (one byte per character cell)
	TED_V_COLOR_SIZE = 1024

	// Character ROM/RAM size (256 chars × 8 bytes each)
	TED_V_CHARSET_SIZE = 2048

	// Total VRAM allocation for TED video
	TED_V_VRAM_SIZE = TED_V_MATRIX_SIZE + TED_V_COLOR_SIZE + TED_V_CHARSET_SIZE
)

// =============================================================================
// TED Video Timing Constants
// =============================================================================

const (
	// Compositor layer (between VGA=10 and ULA=15)
	TED_V_LAYER = 12

	// Flash/cursor blink rate (in frames, ~30 frames at 50Hz ≈ 1.67Hz)
	TED_V_CURSOR_FRAMES = 30
)

// =============================================================================
// 6502 CPU Mappings
// =============================================================================

const (
	// 6502: TED video registers at 0xD620-0xD65F
	C6502_TED_V_BASE      = 0xD620
	C6502_TED_V_CTRL1     = 0xD620
	C6502_TED_V_CTRL2     = 0xD621
	C6502_TED_V_CHAR_BASE = 0xD622
	C6502_TED_V_VID_BASE  = 0xD623
	C6502_TED_V_BG0       = 0xD624
	C6502_TED_V_BG1       = 0xD625
	C6502_TED_V_BG2       = 0xD626
	C6502_TED_V_BG3       = 0xD627
	C6502_TED_V_BORDER    = 0xD628
	C6502_TED_V_CURSOR_HI = 0xD629
	C6502_TED_V_CURSOR_LO = 0xD62A
	C6502_TED_V_CURSOR_C  = 0xD62B
	C6502_TED_V_RASTER_LO = 0xD62C
	C6502_TED_V_RASTER_HI = 0xD62D
	C6502_TED_V_ENABLE    = 0xD62E
	C6502_TED_V_STATUS    = 0xD62F
	C6502_TED_V_END       = 0xD62F
)

// =============================================================================
// Z80 CPU Mappings (via port I/O)
// =============================================================================

const (
	// Z80: Uses same port select/data pair as TED audio (0xF2/0xF3)
	// Register indices 0x20-0x2F select TED video registers
	Z80_TED_V_INDEX_BASE = 0x20
	Z80_TED_V_INDEX_END  = 0x2F
)

// =============================================================================
// TED Color System
// =============================================================================

// TED has 121 colors: 16 hues × 8 luminances, but black (hue 0) only exists
// at luminance 0, giving us 1 + (15 × 8) = 121 unique colors.

// TED hue names (0-15)
const (
	TED_HUE_BLACK       = 0
	TED_HUE_WHITE       = 1
	TED_HUE_RED         = 2
	TED_HUE_CYAN        = 3
	TED_HUE_PURPLE      = 4
	TED_HUE_GREEN       = 5
	TED_HUE_BLUE        = 6
	TED_HUE_YELLOW      = 7
	TED_HUE_ORANGE      = 8
	TED_HUE_BROWN       = 9
	TED_HUE_YELLOW_GRN  = 10
	TED_HUE_PINK        = 11
	TED_HUE_BLUE_GREEN  = 12
	TED_HUE_LIGHT_BLUE  = 13
	TED_HUE_DARK_BLUE   = 14
	TED_HUE_LIGHT_GREEN = 15
)

// TED luminance levels (0-7)
const (
	TED_LUM_0 = 0 // Darkest
	TED_LUM_1 = 1
	TED_LUM_2 = 2
	TED_LUM_3 = 3
	TED_LUM_4 = 4
	TED_LUM_5 = 5
	TED_LUM_6 = 6
	TED_LUM_7 = 7 // Brightest
)

// TEDColorByte creates a color byte from hue and luminance
// Format: bits 4-6 = luminance (0-7), bits 0-3 = hue (0-15)
func TEDColorByte(hue, luminance uint8) uint8 {
	return ((luminance & 0x07) << 4) | (hue & 0x0F)
}

// ParseTEDColorByte extracts hue and luminance from a color byte
func ParseTEDColorByte(color uint8) (hue, luminance uint8) {
	hue = color & 0x0F
	luminance = (color >> 4) & 0x07
	return
}

// TEDPalette contains the 128 possible TED color values as RGB.
// Index = (luminance << 4) | hue
// Note: Only 121 are unique since black (hue 0) at any luminance > 0 is still black.
var TEDPalette = [128][3]uint8{
	// Luminance 0 (darkest)
	{0x00, 0x00, 0x00}, // 0x00: Black
	{0x21, 0x21, 0x21}, // 0x01: White L0
	{0x42, 0x10, 0x10}, // 0x02: Red L0
	{0x10, 0x31, 0x31}, // 0x03: Cyan L0
	{0x31, 0x10, 0x31}, // 0x04: Purple L0
	{0x10, 0x31, 0x10}, // 0x05: Green L0
	{0x10, 0x10, 0x42}, // 0x06: Blue L0
	{0x31, 0x31, 0x10}, // 0x07: Yellow L0
	{0x42, 0x21, 0x10}, // 0x08: Orange L0
	{0x31, 0x21, 0x10}, // 0x09: Brown L0
	{0x21, 0x31, 0x10}, // 0x0A: Yellow-Green L0
	{0x42, 0x21, 0x31}, // 0x0B: Pink L0
	{0x10, 0x31, 0x21}, // 0x0C: Blue-Green L0
	{0x21, 0x21, 0x42}, // 0x0D: Light Blue L0
	{0x21, 0x10, 0x42}, // 0x0E: Dark Blue L0
	{0x21, 0x42, 0x21}, // 0x0F: Light Green L0

	// Luminance 1
	{0x00, 0x00, 0x00}, // 0x10: Black (same)
	{0x3B, 0x3B, 0x3B}, // 0x11: White L1
	{0x5C, 0x1C, 0x1C}, // 0x12: Red L1
	{0x1C, 0x4B, 0x4B}, // 0x13: Cyan L1
	{0x4B, 0x1C, 0x4B}, // 0x14: Purple L1
	{0x1C, 0x4B, 0x1C}, // 0x15: Green L1
	{0x1C, 0x1C, 0x5C}, // 0x16: Blue L1
	{0x4B, 0x4B, 0x1C}, // 0x17: Yellow L1
	{0x5C, 0x35, 0x1C}, // 0x18: Orange L1
	{0x4B, 0x35, 0x1C}, // 0x19: Brown L1
	{0x35, 0x4B, 0x1C}, // 0x1A: Yellow-Green L1
	{0x5C, 0x35, 0x4B}, // 0x1B: Pink L1
	{0x1C, 0x4B, 0x35}, // 0x1C: Blue-Green L1
	{0x35, 0x35, 0x5C}, // 0x1D: Light Blue L1
	{0x35, 0x1C, 0x5C}, // 0x1E: Dark Blue L1
	{0x35, 0x5C, 0x35}, // 0x1F: Light Green L1

	// Luminance 2
	{0x00, 0x00, 0x00}, // 0x20: Black (same)
	{0x55, 0x55, 0x55}, // 0x21: White L2
	{0x76, 0x28, 0x28}, // 0x22: Red L2
	{0x28, 0x65, 0x65}, // 0x23: Cyan L2
	{0x65, 0x28, 0x65}, // 0x24: Purple L2
	{0x28, 0x65, 0x28}, // 0x25: Green L2
	{0x28, 0x28, 0x76}, // 0x26: Blue L2
	{0x65, 0x65, 0x28}, // 0x27: Yellow L2
	{0x76, 0x4F, 0x28}, // 0x28: Orange L2
	{0x65, 0x4F, 0x28}, // 0x29: Brown L2
	{0x4F, 0x65, 0x28}, // 0x2A: Yellow-Green L2
	{0x76, 0x4F, 0x65}, // 0x2B: Pink L2
	{0x28, 0x65, 0x4F}, // 0x2C: Blue-Green L2
	{0x4F, 0x4F, 0x76}, // 0x2D: Light Blue L2
	{0x4F, 0x28, 0x76}, // 0x2E: Dark Blue L2
	{0x4F, 0x76, 0x4F}, // 0x2F: Light Green L2

	// Luminance 3
	{0x00, 0x00, 0x00}, // 0x30: Black (same)
	{0x6F, 0x6F, 0x6F}, // 0x31: White L3
	{0x90, 0x34, 0x34}, // 0x32: Red L3
	{0x34, 0x7F, 0x7F}, // 0x33: Cyan L3
	{0x7F, 0x34, 0x7F}, // 0x34: Purple L3
	{0x34, 0x7F, 0x34}, // 0x35: Green L3
	{0x34, 0x34, 0x90}, // 0x36: Blue L3
	{0x7F, 0x7F, 0x34}, // 0x37: Yellow L3
	{0x90, 0x69, 0x34}, // 0x38: Orange L3
	{0x7F, 0x69, 0x34}, // 0x39: Brown L3
	{0x69, 0x7F, 0x34}, // 0x3A: Yellow-Green L3
	{0x90, 0x69, 0x7F}, // 0x3B: Pink L3
	{0x34, 0x7F, 0x69}, // 0x3C: Blue-Green L3
	{0x69, 0x69, 0x90}, // 0x3D: Light Blue L3
	{0x69, 0x34, 0x90}, // 0x3E: Dark Blue L3
	{0x69, 0x90, 0x69}, // 0x3F: Light Green L3

	// Luminance 4
	{0x00, 0x00, 0x00}, // 0x40: Black (same)
	{0x89, 0x89, 0x89}, // 0x41: White L4
	{0xAA, 0x40, 0x40}, // 0x42: Red L4
	{0x40, 0x99, 0x99}, // 0x43: Cyan L4
	{0x99, 0x40, 0x99}, // 0x44: Purple L4
	{0x40, 0x99, 0x40}, // 0x45: Green L4
	{0x40, 0x40, 0xAA}, // 0x46: Blue L4
	{0x99, 0x99, 0x40}, // 0x47: Yellow L4
	{0xAA, 0x83, 0x40}, // 0x48: Orange L4
	{0x99, 0x83, 0x40}, // 0x49: Brown L4
	{0x83, 0x99, 0x40}, // 0x4A: Yellow-Green L4
	{0xAA, 0x83, 0x99}, // 0x4B: Pink L4
	{0x40, 0x99, 0x83}, // 0x4C: Blue-Green L4
	{0x83, 0x83, 0xAA}, // 0x4D: Light Blue L4
	{0x83, 0x40, 0xAA}, // 0x4E: Dark Blue L4
	{0x83, 0xAA, 0x83}, // 0x4F: Light Green L4

	// Luminance 5
	{0x00, 0x00, 0x00}, // 0x50: Black (same)
	{0xA3, 0xA3, 0xA3}, // 0x51: White L5
	{0xC4, 0x4C, 0x4C}, // 0x52: Red L5
	{0x4C, 0xB3, 0xB3}, // 0x53: Cyan L5
	{0xB3, 0x4C, 0xB3}, // 0x54: Purple L5
	{0x4C, 0xB3, 0x4C}, // 0x55: Green L5
	{0x4C, 0x4C, 0xC4}, // 0x56: Blue L5
	{0xB3, 0xB3, 0x4C}, // 0x57: Yellow L5
	{0xC4, 0x9D, 0x4C}, // 0x58: Orange L5
	{0xB3, 0x9D, 0x4C}, // 0x59: Brown L5
	{0x9D, 0xB3, 0x4C}, // 0x5A: Yellow-Green L5
	{0xC4, 0x9D, 0xB3}, // 0x5B: Pink L5
	{0x4C, 0xB3, 0x9D}, // 0x5C: Blue-Green L5
	{0x9D, 0x9D, 0xC4}, // 0x5D: Light Blue L5
	{0x9D, 0x4C, 0xC4}, // 0x5E: Dark Blue L5
	{0x9D, 0xC4, 0x9D}, // 0x5F: Light Green L5

	// Luminance 6
	{0x00, 0x00, 0x00}, // 0x60: Black (same)
	{0xBD, 0xBD, 0xBD}, // 0x61: White L6
	{0xDE, 0x58, 0x58}, // 0x62: Red L6
	{0x58, 0xCD, 0xCD}, // 0x63: Cyan L6
	{0xCD, 0x58, 0xCD}, // 0x64: Purple L6
	{0x58, 0xCD, 0x58}, // 0x65: Green L6
	{0x58, 0x58, 0xDE}, // 0x66: Blue L6
	{0xCD, 0xCD, 0x58}, // 0x67: Yellow L6
	{0xDE, 0xB7, 0x58}, // 0x68: Orange L6
	{0xCD, 0xB7, 0x58}, // 0x69: Brown L6
	{0xB7, 0xCD, 0x58}, // 0x6A: Yellow-Green L6
	{0xDE, 0xB7, 0xCD}, // 0x6B: Pink L6
	{0x58, 0xCD, 0xB7}, // 0x6C: Blue-Green L6
	{0xB7, 0xB7, 0xDE}, // 0x6D: Light Blue L6
	{0xB7, 0x58, 0xDE}, // 0x6E: Dark Blue L6
	{0xB7, 0xDE, 0xB7}, // 0x6F: Light Green L6

	// Luminance 7 (brightest)
	{0x00, 0x00, 0x00}, // 0x70: Black (same)
	{0xD7, 0xD7, 0xD7}, // 0x71: White L7
	{0xF8, 0x64, 0x64}, // 0x72: Red L7
	{0x64, 0xE7, 0xE7}, // 0x73: Cyan L7
	{0xE7, 0x64, 0xE7}, // 0x74: Purple L7
	{0x64, 0xE7, 0x64}, // 0x75: Green L7
	{0x64, 0x64, 0xF8}, // 0x76: Blue L7
	{0xE7, 0xE7, 0x64}, // 0x77: Yellow L7
	{0xF8, 0xD1, 0x64}, // 0x78: Orange L7
	{0xE7, 0xD1, 0x64}, // 0x79: Brown L7
	{0xD1, 0xE7, 0x64}, // 0x7A: Yellow-Green L7
	{0xF8, 0xD1, 0xE7}, // 0x7B: Pink L7
	{0x64, 0xE7, 0xD1}, // 0x7C: Blue-Green L7
	{0xD1, 0xD1, 0xF8}, // 0x7D: Light Blue L7
	{0xD1, 0x64, 0xF8}, // 0x7E: Dark Blue L7
	{0xD1, 0xF8, 0xD1}, // 0x7F: Light Green L7
}

// GetTEDColor returns RGB values for a TED color byte
func GetTEDColor(colorByte uint8) (r, g, b uint8) {
	// Clamp to valid range (0-127)
	index := colorByte & 0x7F
	return TEDPalette[index][0], TEDPalette[index][1], TEDPalette[index][2]
}

// =============================================================================
// TED Default Character Set (8x8 uppercase + graphics chars)
// This is a simplified version - the actual Plus/4 has a full character ROM
// =============================================================================

// TEDDefaultCharset provides a basic 8x8 character set for text mode
// Each character is 8 bytes (one byte per row, MSB = leftmost pixel)
var TEDDefaultCharset = [256][8]uint8{
	// Character 0x00-0x1F: Control characters (shown as space/graphics)
	0x00: {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // NUL (space)
	// ... more control chars would be here

	// Character 0x20-0x7F: Standard ASCII
	0x20: {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // Space
	0x21: {0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x00}, // !
	0x22: {0x6C, 0x6C, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00}, // "
	0x23: {0x6C, 0x6C, 0xFE, 0x6C, 0xFE, 0x6C, 0x6C, 0x00}, // #
	0x24: {0x18, 0x7E, 0xC0, 0x7C, 0x06, 0xFC, 0x18, 0x00}, // $
	0x25: {0x00, 0xC6, 0xCC, 0x18, 0x30, 0x66, 0xC6, 0x00}, // %
	0x26: {0x38, 0x6C, 0x38, 0x76, 0xDC, 0xCC, 0x76, 0x00}, // &
	0x27: {0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00}, // '
	0x28: {0x0C, 0x18, 0x30, 0x30, 0x30, 0x18, 0x0C, 0x00}, // (
	0x29: {0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00}, // )
	0x2A: {0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00}, // *
	0x2B: {0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00}, // +
	0x2C: {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30}, // ,
	0x2D: {0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00}, // -
	0x2E: {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00}, // .
	0x2F: {0x06, 0x0C, 0x18, 0x30, 0x60, 0xC0, 0x80, 0x00}, // /

	// Digits 0-9
	0x30: {0x7C, 0xC6, 0xCE, 0xDE, 0xF6, 0xE6, 0x7C, 0x00}, // 0
	0x31: {0x18, 0x38, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00}, // 1
	0x32: {0x7C, 0xC6, 0x06, 0x1C, 0x30, 0x66, 0xFE, 0x00}, // 2
	0x33: {0x7C, 0xC6, 0x06, 0x3C, 0x06, 0xC6, 0x7C, 0x00}, // 3
	0x34: {0x1C, 0x3C, 0x6C, 0xCC, 0xFE, 0x0C, 0x1E, 0x00}, // 4
	0x35: {0xFE, 0xC0, 0xFC, 0x06, 0x06, 0xC6, 0x7C, 0x00}, // 5
	0x36: {0x38, 0x60, 0xC0, 0xFC, 0xC6, 0xC6, 0x7C, 0x00}, // 6
	0x37: {0xFE, 0xC6, 0x0C, 0x18, 0x30, 0x30, 0x30, 0x00}, // 7
	0x38: {0x7C, 0xC6, 0xC6, 0x7C, 0xC6, 0xC6, 0x7C, 0x00}, // 8
	0x39: {0x7C, 0xC6, 0xC6, 0x7E, 0x06, 0x0C, 0x78, 0x00}, // 9
	0x3A: {0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x00}, // :
	0x3B: {0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x30}, // ;
	0x3C: {0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x00}, // <
	0x3D: {0x00, 0x00, 0x7E, 0x00, 0x00, 0x7E, 0x00, 0x00}, // =
	0x3E: {0x60, 0x30, 0x18, 0x0C, 0x18, 0x30, 0x60, 0x00}, // >
	0x3F: {0x7C, 0xC6, 0x0C, 0x18, 0x18, 0x00, 0x18, 0x00}, // ?

	0x40: {0x7C, 0xC6, 0xDE, 0xDE, 0xDC, 0xC0, 0x7E, 0x00}, // @

	// Uppercase letters A-Z
	0x41: {0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0xC6, 0xC6, 0x00}, // A
	0x42: {0xFC, 0x66, 0x66, 0x7C, 0x66, 0x66, 0xFC, 0x00}, // B
	0x43: {0x3C, 0x66, 0xC0, 0xC0, 0xC0, 0x66, 0x3C, 0x00}, // C
	0x44: {0xF8, 0x6C, 0x66, 0x66, 0x66, 0x6C, 0xF8, 0x00}, // D
	0x45: {0xFE, 0x62, 0x68, 0x78, 0x68, 0x62, 0xFE, 0x00}, // E
	0x46: {0xFE, 0x62, 0x68, 0x78, 0x68, 0x60, 0xF0, 0x00}, // F
	0x47: {0x3C, 0x66, 0xC0, 0xC0, 0xCE, 0x66, 0x3E, 0x00}, // G
	0x48: {0xC6, 0xC6, 0xC6, 0xFE, 0xC6, 0xC6, 0xC6, 0x00}, // H
	0x49: {0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00}, // I
	0x4A: {0x1E, 0x0C, 0x0C, 0x0C, 0xCC, 0xCC, 0x78, 0x00}, // J
	0x4B: {0xE6, 0x66, 0x6C, 0x78, 0x6C, 0x66, 0xE6, 0x00}, // K
	0x4C: {0xF0, 0x60, 0x60, 0x60, 0x62, 0x66, 0xFE, 0x00}, // L
	0x4D: {0xC6, 0xEE, 0xFE, 0xFE, 0xD6, 0xC6, 0xC6, 0x00}, // M
	0x4E: {0xC6, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0xC6, 0x00}, // N
	0x4F: {0x38, 0x6C, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00}, // O
	0x50: {0xFC, 0x66, 0x66, 0x7C, 0x60, 0x60, 0xF0, 0x00}, // P
	0x51: {0x7C, 0xC6, 0xC6, 0xC6, 0xD6, 0x7C, 0x0E, 0x00}, // Q
	0x52: {0xFC, 0x66, 0x66, 0x7C, 0x6C, 0x66, 0xE6, 0x00}, // R
	0x53: {0x7C, 0xC6, 0xE0, 0x78, 0x0E, 0xC6, 0x7C, 0x00}, // S
	0x54: {0x7E, 0x7E, 0x5A, 0x18, 0x18, 0x18, 0x3C, 0x00}, // T
	0x55: {0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00}, // U
	0x56: {0xC6, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x10, 0x00}, // V
	0x57: {0xC6, 0xC6, 0xD6, 0xFE, 0xFE, 0xEE, 0xC6, 0x00}, // W
	0x58: {0xC6, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0xC6, 0x00}, // X
	0x59: {0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x3C, 0x00}, // Y
	0x5A: {0xFE, 0xC6, 0x8C, 0x18, 0x32, 0x66, 0xFE, 0x00}, // Z
	0x5B: {0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3C, 0x00}, // [
	0x5C: {0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x02, 0x00}, // backslash
	0x5D: {0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00}, // ]
	0x5E: {0x10, 0x38, 0x6C, 0xC6, 0x00, 0x00, 0x00, 0x00}, // ^
	0x5F: {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF}, // _

	0x60: {0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00}, // `

	// Lowercase letters a-z
	0x61: {0x00, 0x00, 0x78, 0x0C, 0x7C, 0xCC, 0x76, 0x00}, // a
	0x62: {0xE0, 0x60, 0x7C, 0x66, 0x66, 0x66, 0xDC, 0x00}, // b
	0x63: {0x00, 0x00, 0x7C, 0xC6, 0xC0, 0xC6, 0x7C, 0x00}, // c
	0x64: {0x1C, 0x0C, 0x7C, 0xCC, 0xCC, 0xCC, 0x76, 0x00}, // d
	0x65: {0x00, 0x00, 0x7C, 0xC6, 0xFE, 0xC0, 0x7C, 0x00}, // e
	0x66: {0x38, 0x6C, 0x60, 0xF8, 0x60, 0x60, 0xF0, 0x00}, // f
	0x67: {0x00, 0x00, 0x76, 0xCC, 0xCC, 0x7C, 0x0C, 0xF8}, // g
	0x68: {0xE0, 0x60, 0x6C, 0x76, 0x66, 0x66, 0xE6, 0x00}, // h
	0x69: {0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x00}, // i
	0x6A: {0x06, 0x00, 0x0E, 0x06, 0x06, 0x66, 0x66, 0x3C}, // j
	0x6B: {0xE0, 0x60, 0x66, 0x6C, 0x78, 0x6C, 0xE6, 0x00}, // k
	0x6C: {0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00}, // l
	0x6D: {0x00, 0x00, 0xEC, 0xFE, 0xD6, 0xD6, 0xD6, 0x00}, // m
	0x6E: {0x00, 0x00, 0xDC, 0x66, 0x66, 0x66, 0x66, 0x00}, // n
	0x6F: {0x00, 0x00, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00}, // o
	0x70: {0x00, 0x00, 0xDC, 0x66, 0x66, 0x7C, 0x60, 0xF0}, // p
	0x71: {0x00, 0x00, 0x76, 0xCC, 0xCC, 0x7C, 0x0C, 0x1E}, // q
	0x72: {0x00, 0x00, 0xDC, 0x76, 0x60, 0x60, 0xF0, 0x00}, // r
	0x73: {0x00, 0x00, 0x7E, 0xC0, 0x7C, 0x06, 0xFC, 0x00}, // s
	0x74: {0x30, 0x30, 0xFC, 0x30, 0x30, 0x36, 0x1C, 0x00}, // t
	0x75: {0x00, 0x00, 0xCC, 0xCC, 0xCC, 0xCC, 0x76, 0x00}, // u
	0x76: {0x00, 0x00, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00}, // v
	0x77: {0x00, 0x00, 0xC6, 0xD6, 0xD6, 0xFE, 0x6C, 0x00}, // w
	0x78: {0x00, 0x00, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0x00}, // x
	0x79: {0x00, 0x00, 0xC6, 0xC6, 0xC6, 0x7E, 0x06, 0xFC}, // y
	0x7A: {0x00, 0x00, 0xFE, 0x8C, 0x18, 0x32, 0xFE, 0x00}, // z
	0x7B: {0x0E, 0x18, 0x18, 0x70, 0x18, 0x18, 0x0E, 0x00}, // {
	0x7C: {0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00}, // |
	0x7D: {0x70, 0x18, 0x18, 0x0E, 0x18, 0x18, 0x70, 0x00}, // }
	0x7E: {0x76, 0xDC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // ~
	0x7F: {0x00, 0x10, 0x38, 0x6C, 0xC6, 0xC6, 0xFE, 0x00}, // DEL (filled triangle)

	// Characters 0x80-0xFF: Graphics/extended characters (solid block for now)
	0x80: {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}, // Solid block
}
